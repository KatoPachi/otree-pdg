{% extends "global/Experiment.html" %}
{% load otree static %}

{% block title %}
    選択：あなたは{{ role }}です
{% endblock %}

{% block content %}

<div class="progress" style="height: 20px">
  <div class="progress-bar bg-success" role="progressbar" aria-label="Progress" aria-valuemin="0" id="progressbar"></div>
</div>
<br>
{% if group.dictator_first %}
<div class="alert alert-warning" role="alert">
  <p><b>あなたの状況と選択について</b></p>
  <p>現在、あなたは{{ C.ENDOWMENT }}を保有しています。</p>
  <p>あなたは{{ C.ENDOWMENT }}のうち何トークンを同じグループのメンバーDに渡すか決めてください。</p>
</div>
<div class="alert alert-info" role="alert">
  <p><b>前の順番の人の選択について</b></p>
  <p>メンバーDはあなたから受け取ったトークンのうち <b>{{ allocation }}％</b> をメンバーRに渡することを決めました。</p>
  <p>また、メンバーDも{{ C.ENDOWMENT }}を保有しています。</p>
</div>
<p>下部にある「計算機」を使うと、三人の最終的なトークンを予測できます。</p>
<p>「計算機」などを活用してあなたの選択を決めた後に、0から100の間の<b>整数（半角数字）</b>で以下のフォームに入力してください。</p>
{% else %}
<div class="alert alert-info" role="alert">
  <p><b>あなたの状況と選択について</b></p>
  <p>現在、あなたは{{ C.ENDOWMENT }}を持っています。</p>
  <p>同じグループのメンバーPは{{ C.ENDOWMENT }}のうち、 <b>{{ send }}トークン</b> をあなたに渡しました。</p>
  <p>あなたはメンバーPから受け取った <b>{{ send }}トークン</b> のうち何％（0～200％）をメンバーRに渡すかを決めてください。</p>
  <ul>
    <li>
      100％より低い数字：メンバーPから受け取ったトークンの一部をメンバーRに渡します。残ったトークンはあなたのものになります。
    </li>
    <li>
      100％より大きい数字：メンバーPから受け取ったトークンに自身が保有するトークンを上乗せして、メンバーRに渡します。
    </li>
  </ul>
</div>
<p>下部にある「計算機」を使うと、三人の最終的なトークンを予測できます。</p>
<p>「計算機」などを活用してあなたの選択を決めた後に、0から200の間の<b>整数（半角数字）</b>で以下のフォームに入力してください。</p>
{% endif %}

{% formfields %}
{% next_button %}

<hr>

{% if group.dictator_first %}
<div id="second-patron-calculator">
    <h4>計算機</h4>
    <p>
      あなたの選択を以下の入力し、「計算する」ボタンを押すと、
      あなたと他２人の最終的なトークンを確認できます。
    </p>
    <div class="alert alert-secondary" role="alert">
    あなたの選択：
    <input maxlength="3" style="width: 50px;" type="text" id="send">
    トークン（半角数字）をメンバーDに渡す
    <input type="button" value="計算する" onclick="pi()">
    </div>
    <table border="1" style="border-collapse: collapse" width="500">
      <tr>
        <th>グループメンバー</th>
        <th>トークン</th>
      </tr>
      <tr>
        <td>メンバーP（<b>あなた</b>）</td>
        <th><span id="piP">？？</span></th>
      </tr>
      <tr>
        <td>メンバーD</td>
        <th><span id="piD">？？</span></th>
      </tr>
      <tr>
        <td>メンバーR</td>
        <th><span id="piR">？？</span></th>
      </tr>
    </table>
</div>
{% else %}
<div id="second-dictator-calculator">
  <h4>計算機</h4>
  <p>
    あなたの選択を以下の入力し、「計算する」ボタンを押すと、
    あなたと他２人の最終的なトークンの予測を確認できます。
  </p>
  <div class="alert alert-secondary" role="alert">
  あなたの選択：メンバーPから受け取った{{ send }}トークンのうち
  <input maxlength="3" style="width: 50px;" type="text" id="multiply">
  ％（半角数字）をメンバーRに渡す
  <input type="button" value="計算する" onclick="pi()">
  </div>
  <table border="1" style="border-collapse: collapse" width="500">
    <tr>
      <th>グループメンバー</th>
      <th>トークン</th>
    </tr>
    <tr>
      <td>メンバーP</td>
      <th><span id="piP">？？</span></th>
    </tr>
    <tr>
      <td>メンバーD（<b>あなた</b>）</td>
      <th><span id="piD">？？</span></th>
    </tr>
    <tr>
      <td>メンバーR</td>
      <th><span id="piR">？？</span></th>
    </tr>
  </table>
</div>
{% endif %}
{% endblock %}

{% block scripts %}
{% if group.dictator_first %}
<script type="text/javascript" src="{{ static 'global/js/second-patron-calculator.js' }}"></script>
{% else %}
<script type="text/javascript" src="{{ static 'global/js/second-dictator-calculator.js' }}"></script>
{% endif %}
{% endblock %}